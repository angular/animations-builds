{"version":3,"file":"_util-chunk.mjs","sources":["../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/packages/animations/browser/src/error_helpers.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/packages/animations/browser/src/render/web_animations/animatable_props_set.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/packages/animations/browser/src/render/shared.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/packages/animations/browser/src/util.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {RuntimeErrorCode} from '../../src/errors';\nimport {ɵRuntimeError as RuntimeError} from '@angular/core';\n\nconst LINE_START = '\\n - ';\n\nexport function invalidTimingValue(exp: string | number): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_TIMING_VALUE,\n    ngDevMode && `The provided timing value \"${exp}\" is invalid.`,\n  );\n}\n\nexport function negativeStepValue(): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.NEGATIVE_STEP_VALUE,\n    ngDevMode && 'Duration values below 0 are not allowed for this animation step.',\n  );\n}\n\nexport function negativeDelayValue(): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.NEGATIVE_DELAY_VALUE,\n    ngDevMode && 'Delay values below 0 are not allowed for this animation step.',\n  );\n}\n\nexport function invalidStyleParams(varName: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_STYLE_PARAMS,\n    ngDevMode &&\n      `Unable to resolve the local animation param ${varName} in the given list of values`,\n  );\n}\n\nexport function invalidParamValue(varName: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_PARAM_VALUE,\n    ngDevMode && `Please provide a value for the animation param ${varName}`,\n  );\n}\n\nexport function invalidNodeType(nodeType: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_NODE_TYPE,\n    ngDevMode && `Unable to resolve animation metadata node #${nodeType}`,\n  );\n}\n\nexport function invalidCssUnitValue(userProvidedProperty: string, value: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_CSS_UNIT_VALUE,\n    ngDevMode && `Please provide a CSS unit value for ${userProvidedProperty}:${value}`,\n  );\n}\n\nexport function invalidTrigger(): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_TRIGGER,\n    ngDevMode &&\n      \"animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))\",\n  );\n}\n\nexport function invalidDefinition(): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_DEFINITION,\n    ngDevMode && 'only state() and transition() definitions can sit inside of a trigger()',\n  );\n}\n\nexport function invalidState(metadataName: string, missingSubs: string[]): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_STATE,\n    ngDevMode &&\n      `state(\"${metadataName}\", ...) must define default values for all the following style substitutions: ${missingSubs.join(\n        ', ',\n      )}`,\n  );\n}\n\nexport function invalidStyleValue(value: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_STYLE_VALUE,\n    ngDevMode && `The provided style string value ${value} is not allowed.`,\n  );\n}\n\nexport function invalidProperty(prop: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_PROPERTY,\n    ngDevMode &&\n      `The provided animation property \"${prop}\" is not a supported CSS property for animations`,\n  );\n}\n\nexport function invalidParallelAnimation(\n  prop: string,\n  firstStart: number,\n  firstEnd: number,\n  secondStart: number,\n  secondEnd: number,\n): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_PARALLEL_ANIMATION,\n    ngDevMode &&\n      `The CSS property \"${prop}\" that exists between the times of \"${firstStart}ms\" and \"${firstEnd}ms\" is also being animated in a parallel animation between the times of \"${secondStart}ms\" and \"${secondEnd}ms\"`,\n  );\n}\n\nexport function invalidKeyframes(): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_KEYFRAMES,\n    ngDevMode && `keyframes() must be placed inside of a call to animate()`,\n  );\n}\n\nexport function invalidOffset(): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_OFFSET,\n    ngDevMode && `Please ensure that all keyframe offsets are between 0 and 1`,\n  );\n}\n\nexport function keyframeOffsetsOutOfOrder(): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.KEYFRAME_OFFSETS_OUT_OF_ORDER,\n    ngDevMode && `Please ensure that all keyframe offsets are in order`,\n  );\n}\n\nexport function keyframesMissingOffsets(): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.KEYFRAMES_MISSING_OFFSETS,\n    ngDevMode && `Not all style() steps within the declared keyframes() contain offsets`,\n  );\n}\n\nexport function invalidStagger(): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_STAGGER,\n    ngDevMode && `stagger() can only be used inside of query()`,\n  );\n}\n\nexport function invalidQuery(selector: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_QUERY,\n    ngDevMode &&\n      `\\`query(\"${selector}\")\\` returned zero elements. (Use \\`query(\"${selector}\", { optional: true })\\` if you wish to allow this.)`,\n  );\n}\n\nexport function invalidExpression(expr: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_EXPRESSION,\n    ngDevMode && `The provided transition expression \"${expr}\" is not supported`,\n  );\n}\n\nexport function invalidTransitionAlias(alias: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.INVALID_TRANSITION_ALIAS,\n    ngDevMode && `The transition alias value \"${alias}\" is not supported`,\n  );\n}\n\nexport function validationFailed(errors: Error[]): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.VALIDATION_FAILED,\n    ngDevMode && `animation validation failed:\\n${errors.map((err) => err.message).join('\\n')}`,\n  );\n}\n\nexport function buildingFailed(errors: Error[]): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.BUILDING_FAILED,\n    ngDevMode && `animation building failed:\\n${errors.map((err) => err.message).join('\\n')}`,\n  );\n}\n\nexport function triggerBuildFailed(name: string, errors: Error[]): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.TRIGGER_BUILD_FAILED,\n    ngDevMode &&\n      `The animation trigger \"${name}\" has failed to build due to the following errors:\\n - ${errors\n        .map((err) => err.message)\n        .join('\\n - ')}`,\n  );\n}\n\nexport function animationFailed(errors: Error[]): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.ANIMATION_FAILED,\n    ngDevMode &&\n      `Unable to animate due to the following errors:${LINE_START}${errors\n        .map((err) => err.message)\n        .join(LINE_START)}`,\n  );\n}\n\nexport function registerFailed(errors: Error[]): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.REGISTRATION_FAILED,\n    ngDevMode &&\n      `Unable to build the animation due to the following errors: ${errors\n        .map((err) => err.message)\n        .join('\\n')}`,\n  );\n}\n\nexport function missingOrDestroyedAnimation(): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.MISSING_OR_DESTROYED_ANIMATION,\n    ngDevMode && \"The requested animation doesn't exist or has already been destroyed\",\n  );\n}\n\nexport function createAnimationFailed(errors: Error[]): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.CREATE_ANIMATION_FAILED,\n    ngDevMode &&\n      `Unable to create the animation due to the following errors:${errors\n        .map((err) => err.message)\n        .join('\\n')}`,\n  );\n}\n\nexport function missingPlayer(id: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.MISSING_PLAYER,\n    ngDevMode && `Unable to find the timeline player referenced by ${id}`,\n  );\n}\n\nexport function missingTrigger(phase: string, name: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.MISSING_TRIGGER,\n    ngDevMode &&\n      `Unable to listen on the animation trigger event \"${phase}\" because the animation trigger \"${name}\" doesn\\'t exist!`,\n  );\n}\n\nexport function missingEvent(name: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.MISSING_EVENT,\n    ngDevMode &&\n      `Unable to listen on the animation trigger \"${name}\" because the provided event is undefined!`,\n  );\n}\n\nexport function unsupportedTriggerEvent(phase: string, name: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.UNSUPPORTED_TRIGGER_EVENT,\n    ngDevMode &&\n      `The provided animation trigger event \"${phase}\" for the animation trigger \"${name}\" is not supported!`,\n  );\n}\n\nexport function unregisteredTrigger(name: string): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.UNREGISTERED_TRIGGER,\n    ngDevMode && `The provided animation trigger \"${name}\" has not been registered!`,\n  );\n}\n\nexport function triggerTransitionsFailed(errors: Error[]): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.TRIGGER_TRANSITIONS_FAILED,\n    ngDevMode &&\n      `Unable to process animations due to the following failed trigger transitions\\n ${errors\n        .map((err) => err.message)\n        .join('\\n')}`,\n  );\n}\n\nexport function triggerParsingFailed(name: string, errors: Error[]): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.TRIGGER_PARSING_FAILED,\n    ngDevMode &&\n      `Animation parsing for the ${name} trigger have failed:${LINE_START}${errors\n        .map((err) => err.message)\n        .join(LINE_START)}`,\n  );\n}\n\nexport function transitionFailed(name: string, errors: Error[]): Error {\n  return new RuntimeError(\n    RuntimeErrorCode.TRANSITION_FAILED,\n    ngDevMode && `@${name} has failed due to:\\n ${errors.map((err) => err.message).join('\\n- ')}`,\n  );\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\n/**\n * Set of all animatable CSS properties\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties\n */\nexport const ANIMATABLE_PROP_SET = new Set([\n  '-moz-outline-radius',\n  '-moz-outline-radius-bottomleft',\n  '-moz-outline-radius-bottomright',\n  '-moz-outline-radius-topleft',\n  '-moz-outline-radius-topright',\n  '-ms-grid-columns',\n  '-ms-grid-rows',\n  '-webkit-line-clamp',\n  '-webkit-text-fill-color',\n  '-webkit-text-stroke',\n  '-webkit-text-stroke-color',\n  'accent-color',\n  'all',\n  'backdrop-filter',\n  'background',\n  'background-color',\n  'background-position',\n  'background-size',\n  'block-size',\n  'border',\n  'border-block-end',\n  'border-block-end-color',\n  'border-block-end-width',\n  'border-block-start',\n  'border-block-start-color',\n  'border-block-start-width',\n  'border-bottom',\n  'border-bottom-color',\n  'border-bottom-left-radius',\n  'border-bottom-right-radius',\n  'border-bottom-width',\n  'border-color',\n  'border-end-end-radius',\n  'border-end-start-radius',\n  'border-image-outset',\n  'border-image-slice',\n  'border-image-width',\n  'border-inline-end',\n  'border-inline-end-color',\n  'border-inline-end-width',\n  'border-inline-start',\n  'border-inline-start-color',\n  'border-inline-start-width',\n  'border-left',\n  'border-left-color',\n  'border-left-width',\n  'border-radius',\n  'border-right',\n  'border-right-color',\n  'border-right-width',\n  'border-start-end-radius',\n  'border-start-start-radius',\n  'border-top',\n  'border-top-color',\n  'border-top-left-radius',\n  'border-top-right-radius',\n  'border-top-width',\n  'border-width',\n  'bottom',\n  'box-shadow',\n  'caret-color',\n  'clip',\n  'clip-path',\n  'color',\n  'column-count',\n  'column-gap',\n  'column-rule',\n  'column-rule-color',\n  'column-rule-width',\n  'column-width',\n  'columns',\n  'filter',\n  'flex',\n  'flex-basis',\n  'flex-grow',\n  'flex-shrink',\n  'font',\n  'font-size',\n  'font-size-adjust',\n  'font-stretch',\n  'font-variation-settings',\n  'font-weight',\n  'gap',\n  'grid-column-gap',\n  'grid-gap',\n  'grid-row-gap',\n  'grid-template-columns',\n  'grid-template-rows',\n  'height',\n  'inline-size',\n  'input-security',\n  'inset',\n  'inset-block',\n  'inset-block-end',\n  'inset-block-start',\n  'inset-inline',\n  'inset-inline-end',\n  'inset-inline-start',\n  'left',\n  'letter-spacing',\n  'line-clamp',\n  'line-height',\n  'margin',\n  'margin-block-end',\n  'margin-block-start',\n  'margin-bottom',\n  'margin-inline-end',\n  'margin-inline-start',\n  'margin-left',\n  'margin-right',\n  'margin-top',\n  'mask',\n  'mask-border',\n  'mask-position',\n  'mask-size',\n  'max-block-size',\n  'max-height',\n  'max-inline-size',\n  'max-lines',\n  'max-width',\n  'min-block-size',\n  'min-height',\n  'min-inline-size',\n  'min-width',\n  'object-position',\n  'offset',\n  'offset-anchor',\n  'offset-distance',\n  'offset-path',\n  'offset-position',\n  'offset-rotate',\n  'opacity',\n  'order',\n  'outline',\n  'outline-color',\n  'outline-offset',\n  'outline-width',\n  'padding',\n  'padding-block-end',\n  'padding-block-start',\n  'padding-bottom',\n  'padding-inline-end',\n  'padding-inline-start',\n  'padding-left',\n  'padding-right',\n  'padding-top',\n  'perspective',\n  'perspective-origin',\n  'right',\n  'rotate',\n  'row-gap',\n  'scale',\n  'scroll-margin',\n  'scroll-margin-block',\n  'scroll-margin-block-end',\n  'scroll-margin-block-start',\n  'scroll-margin-bottom',\n  'scroll-margin-inline',\n  'scroll-margin-inline-end',\n  'scroll-margin-inline-start',\n  'scroll-margin-left',\n  'scroll-margin-right',\n  'scroll-margin-top',\n  'scroll-padding',\n  'scroll-padding-block',\n  'scroll-padding-block-end',\n  'scroll-padding-block-start',\n  'scroll-padding-bottom',\n  'scroll-padding-inline',\n  'scroll-padding-inline-end',\n  'scroll-padding-inline-start',\n  'scroll-padding-left',\n  'scroll-padding-right',\n  'scroll-padding-top',\n  'scroll-snap-coordinate',\n  'scroll-snap-destination',\n  'scrollbar-color',\n  'shape-image-threshold',\n  'shape-margin',\n  'shape-outside',\n  'tab-size',\n  'text-decoration',\n  'text-decoration-color',\n  'text-decoration-thickness',\n  'text-emphasis',\n  'text-emphasis-color',\n  'text-indent',\n  'text-shadow',\n  'text-underline-offset',\n  'top',\n  'transform',\n  'transform-origin',\n  'translate',\n  'vertical-align',\n  'visibility',\n  'width',\n  'word-spacing',\n  'z-index',\n  'zoom',\n]);\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\nimport {\n  AnimationEvent,\n  AnimationPlayer,\n  AUTO_STYLE,\n  NoopAnimationPlayer,\n  ɵAnimationGroupPlayer,\n  ɵPRE_STYLE as PRE_STYLE,\n  ɵStyleDataMap,\n} from '../../../src/animations';\n\nimport {AnimationStyleNormalizer} from '../../src/dsl/style_normalization/animation_style_normalizer';\nimport {animationFailed} from '../error_helpers';\n\nimport {ANIMATABLE_PROP_SET} from './web_animations/animatable_props_set';\n\nexport function optimizeGroupPlayer(players: AnimationPlayer[]): AnimationPlayer {\n  switch (players.length) {\n    case 0:\n      return new NoopAnimationPlayer();\n    case 1:\n      return players[0];\n    default:\n      return new ɵAnimationGroupPlayer(players);\n  }\n}\n\nexport function normalizeKeyframes(\n  normalizer: AnimationStyleNormalizer,\n  keyframes: Array<ɵStyleDataMap>,\n  preStyles: ɵStyleDataMap = new Map(),\n  postStyles: ɵStyleDataMap = new Map(),\n): Array<ɵStyleDataMap> {\n  const errors: Error[] = [];\n  const normalizedKeyframes: Array<ɵStyleDataMap> = [];\n  let previousOffset = -1;\n  let previousKeyframe: ɵStyleDataMap | null = null;\n  keyframes.forEach((kf) => {\n    const offset = kf.get('offset') as number;\n    const isSameOffset = offset == previousOffset;\n    const normalizedKeyframe: ɵStyleDataMap = (isSameOffset && previousKeyframe) || new Map();\n    kf.forEach((val, prop) => {\n      let normalizedProp = prop;\n      let normalizedValue = val;\n      if (prop !== 'offset') {\n        normalizedProp = normalizer.normalizePropertyName(normalizedProp, errors);\n        switch (normalizedValue) {\n          case PRE_STYLE:\n            normalizedValue = preStyles.get(prop)!;\n            break;\n\n          case AUTO_STYLE:\n            normalizedValue = postStyles.get(prop)!;\n            break;\n\n          default:\n            normalizedValue = normalizer.normalizeStyleValue(\n              prop,\n              normalizedProp,\n              normalizedValue,\n              errors,\n            );\n            break;\n        }\n      }\n      normalizedKeyframe.set(normalizedProp, normalizedValue);\n    });\n    if (!isSameOffset) {\n      normalizedKeyframes.push(normalizedKeyframe);\n    }\n    previousKeyframe = normalizedKeyframe;\n    previousOffset = offset;\n  });\n  if (errors.length) {\n    throw animationFailed(errors);\n  }\n\n  return normalizedKeyframes;\n}\n\nexport function listenOnPlayer(\n  player: AnimationPlayer,\n  eventName: string,\n  event: AnimationEvent | undefined,\n  callback: (event: any) => any,\n) {\n  switch (eventName) {\n    case 'start':\n      player.onStart(() => callback(event && copyAnimationEvent(event, 'start', player)));\n      break;\n    case 'done':\n      player.onDone(() => callback(event && copyAnimationEvent(event, 'done', player)));\n      break;\n    case 'destroy':\n      player.onDestroy(() => callback(event && copyAnimationEvent(event, 'destroy', player)));\n      break;\n  }\n}\n\nexport function copyAnimationEvent(\n  e: AnimationEvent,\n  phaseName: string,\n  player: AnimationPlayer,\n): AnimationEvent {\n  const totalTime = player.totalTime;\n  const disabled = (player as any).disabled ? true : false;\n  const event = makeAnimationEvent(\n    e.element,\n    e.triggerName,\n    e.fromState,\n    e.toState,\n    phaseName || e.phaseName,\n    totalTime == undefined ? e.totalTime : totalTime,\n    disabled,\n  );\n  const data = (e as any)['_data'];\n  if (data != null) {\n    (event as any)['_data'] = data;\n  }\n  return event;\n}\n\nexport function makeAnimationEvent(\n  element: any,\n  triggerName: string,\n  fromState: string,\n  toState: string,\n  phaseName: string = '',\n  totalTime: number = 0,\n  disabled?: boolean,\n): AnimationEvent {\n  return {element, triggerName, fromState, toState, phaseName, totalTime, disabled: !!disabled};\n}\n\nexport function getOrSetDefaultValue<T, V>(map: Map<T, V>, key: T, defaultValue: V) {\n  let value = map.get(key);\n  if (!value) {\n    map.set(key, (value = defaultValue));\n  }\n  return value;\n}\n\nexport function parseTimelineCommand(command: string): [string, string] {\n  const separatorPos = command.indexOf(':');\n  const id = command.substring(1, separatorPos);\n  const action = command.slice(separatorPos + 1);\n  return [id, action];\n}\n\nconst documentElement: HTMLElement | null = /* @__PURE__ */ (() =>\n  typeof document === 'undefined' ? null : document.documentElement)();\n\nexport function getParentElement(element: any): unknown | null {\n  const parent = element.parentNode || element.host || null; // consider host to support shadow DOM\n  if (parent === documentElement) {\n    return null;\n  }\n  return parent;\n}\n\nfunction containsVendorPrefix(prop: string): boolean {\n  // Webkit is the only real popular vendor prefix nowadays\n  // cc: http://shouldiprefix.com/\n  return prop.substring(1, 6) == 'ebkit'; // webkit or Webkit\n}\n\nlet _CACHED_BODY: {style: any} | null = null;\nlet _IS_WEBKIT = false;\nexport function validateStyleProperty(prop: string): boolean {\n  if (!_CACHED_BODY) {\n    _CACHED_BODY = getBodyNode() || {};\n    _IS_WEBKIT = _CACHED_BODY!.style ? 'WebkitAppearance' in _CACHED_BODY!.style : false;\n  }\n\n  let result = true;\n  if (_CACHED_BODY!.style && !containsVendorPrefix(prop)) {\n    result = prop in _CACHED_BODY!.style;\n    if (!result && _IS_WEBKIT) {\n      const camelProp = 'Webkit' + prop.charAt(0).toUpperCase() + prop.slice(1);\n      result = camelProp in _CACHED_BODY!.style;\n    }\n  }\n\n  return result;\n}\n\nexport function validateWebAnimatableStyleProperty(prop: string): boolean {\n  return ANIMATABLE_PROP_SET.has(prop);\n}\n\nexport function getBodyNode(): any | null {\n  if (typeof document != 'undefined') {\n    return document.body;\n  }\n  return null;\n}\n\nexport function containsElement(elm1: any, elm2: any): boolean {\n  while (elm2) {\n    if (elm2 === elm1) {\n      return true;\n    }\n    elm2 = getParentElement(elm2);\n  }\n  return false;\n}\n\nexport function invokeQuery(element: any, selector: string, multi: boolean): any[] {\n  if (multi) {\n    return Array.from(element.querySelectorAll(selector));\n  }\n  const elem = element.querySelector(selector);\n  return elem ? [elem] : [];\n}\n\nexport function hypenatePropsKeys(original: ɵStyleDataMap): ɵStyleDataMap {\n  const newMap: ɵStyleDataMap = new Map();\n  original.forEach((val, prop) => {\n    const newProp = prop.replace(/([a-z])([A-Z])/g, '$1-$2');\n    newMap.set(newProp, val);\n  });\n  return newMap;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\nimport {\n  AnimateTimings,\n  AnimationMetadata,\n  AnimationMetadataType,\n  AnimationOptions,\n  sequence,\n  ɵStyleData,\n  ɵStyleDataMap,\n} from '../../src/animations';\n\nimport {Ast as AnimationAst, AstVisitor as AnimationAstVisitor} from './dsl/animation_ast';\nimport {AnimationDslVisitor} from './dsl/animation_dsl_visitor';\nimport {\n  invalidNodeType,\n  invalidParamValue,\n  invalidStyleParams,\n  invalidTimingValue,\n  negativeDelayValue,\n  negativeStepValue,\n} from './error_helpers';\n\nconst ONE_SECOND = 1000;\n\nexport const SUBSTITUTION_EXPR_START = '{{';\nexport const SUBSTITUTION_EXPR_END = '}}';\nexport const ENTER_CLASSNAME = 'ng-enter';\nexport const LEAVE_CLASSNAME = 'ng-leave';\nexport const NG_TRIGGER_CLASSNAME = 'ng-trigger';\nexport const NG_TRIGGER_SELECTOR = '.ng-trigger';\nexport const NG_ANIMATING_CLASSNAME = 'ng-animating';\nexport const NG_ANIMATING_SELECTOR = '.ng-animating';\n\nexport function resolveTimingValue(value: string | number) {\n  if (typeof value == 'number') return value;\n\n  const matches = value.match(/^(-?[\\.\\d]+)(m?s)/);\n  if (!matches || matches.length < 2) return 0;\n\n  return _convertTimeValueToMS(parseFloat(matches[1]), matches[2]);\n}\n\nfunction _convertTimeValueToMS(value: number, unit: string): number {\n  switch (unit) {\n    case 's':\n      return value * ONE_SECOND;\n    default: // ms or something else\n      return value;\n  }\n}\n\nexport function resolveTiming(\n  timings: string | number | AnimateTimings,\n  errors: Error[],\n  allowNegativeValues?: boolean,\n) {\n  return timings.hasOwnProperty('duration')\n    ? <AnimateTimings>timings\n    : parseTimeExpression(<string | number>timings, errors, allowNegativeValues);\n}\n\nconst PARSE_TIME_EXPRESSION_REGEX =\n  /^(-?[\\.\\d]+)(m?s)(?:\\s+(-?[\\.\\d]+)(m?s))?(?:\\s+([-a-z]+(?:\\(.+?\\))?))?$/i;\nfunction parseTimeExpression(\n  exp: string | number,\n  errors: Error[],\n  allowNegativeValues?: boolean,\n): AnimateTimings {\n  let duration: number;\n  let delay: number = 0;\n  let easing: string = '';\n  if (typeof exp === 'string') {\n    const matches = exp.match(PARSE_TIME_EXPRESSION_REGEX);\n    if (matches === null) {\n      errors.push(invalidTimingValue(exp));\n      return {duration: 0, delay: 0, easing: ''};\n    }\n\n    duration = _convertTimeValueToMS(parseFloat(matches[1]), matches[2]);\n\n    const delayMatch = matches[3];\n    if (delayMatch != null) {\n      delay = _convertTimeValueToMS(parseFloat(delayMatch), matches[4]);\n    }\n\n    const easingVal = matches[5];\n    if (easingVal) {\n      easing = easingVal;\n    }\n  } else {\n    duration = exp;\n  }\n\n  if (!allowNegativeValues) {\n    let containsErrors = false;\n    let startIndex = errors.length;\n    if (duration < 0) {\n      errors.push(negativeStepValue());\n      containsErrors = true;\n    }\n    if (delay < 0) {\n      errors.push(negativeDelayValue());\n      containsErrors = true;\n    }\n    if (containsErrors) {\n      errors.splice(startIndex, 0, invalidTimingValue(exp));\n    }\n  }\n\n  return {duration, delay, easing};\n}\n\nexport function normalizeKeyframes(\n  keyframes: Array<ɵStyleData> | Array<ɵStyleDataMap>,\n): Array<ɵStyleDataMap> {\n  if (!keyframes.length) {\n    return [];\n  }\n  if (keyframes[0] instanceof Map) {\n    return keyframes as Array<ɵStyleDataMap>;\n  }\n  return keyframes.map((kf) => new Map(Object.entries(kf)));\n}\n\nexport function normalizeStyles(styles: ɵStyleDataMap | Array<ɵStyleDataMap>): ɵStyleDataMap {\n  return Array.isArray(styles) ? new Map(...styles) : new Map(styles);\n}\n\nexport function setStyles(element: any, styles: ɵStyleDataMap, formerStyles?: ɵStyleDataMap) {\n  styles.forEach((val, prop) => {\n    const camelProp = dashCaseToCamelCase(prop);\n    if (formerStyles && !formerStyles.has(prop)) {\n      formerStyles.set(prop, element.style[camelProp]);\n    }\n    element.style[camelProp] = val;\n  });\n}\n\nexport function eraseStyles(element: any, styles: ɵStyleDataMap) {\n  styles.forEach((_, prop) => {\n    const camelProp = dashCaseToCamelCase(prop);\n    element.style[camelProp] = '';\n  });\n}\n\nexport function normalizeAnimationEntry(\n  steps: AnimationMetadata | AnimationMetadata[],\n): AnimationMetadata {\n  if (Array.isArray(steps)) {\n    if (steps.length == 1) return steps[0];\n    return sequence(steps);\n  }\n  return steps as AnimationMetadata;\n}\n\nexport function validateStyleParams(\n  value: string | number | null | undefined,\n  options: AnimationOptions,\n  errors: Error[],\n) {\n  const params = options.params || {};\n  const matches = extractStyleParams(value);\n  if (matches.length) {\n    matches.forEach((varName) => {\n      if (!params.hasOwnProperty(varName)) {\n        errors.push(invalidStyleParams(varName));\n      }\n    });\n  }\n}\n\nconst PARAM_REGEX = /* @__PURE__ */ new RegExp(\n  `${SUBSTITUTION_EXPR_START}\\\\s*(.+?)\\\\s*${SUBSTITUTION_EXPR_END}`,\n  'g',\n);\nexport function extractStyleParams(value: string | number | null | undefined): string[] {\n  let params: string[] = [];\n  if (typeof value === 'string') {\n    let match: any;\n    while ((match = PARAM_REGEX.exec(value))) {\n      params.push(match[1] as string);\n    }\n    PARAM_REGEX.lastIndex = 0;\n  }\n  return params;\n}\n\nexport function interpolateParams(\n  value: string | number,\n  params: {[name: string]: any},\n  errors: Error[],\n): string | number {\n  const original = `${value}`;\n  const str = original.replace(PARAM_REGEX, (_, varName) => {\n    let localVal = params[varName];\n    // this means that the value was never overridden by the data passed in by the user\n    if (localVal == null) {\n      errors.push(invalidParamValue(varName));\n      localVal = '';\n    }\n    return localVal.toString();\n  });\n\n  // we do this to assert that numeric values stay as they are\n  return str == original ? value : str;\n}\n\nconst DASH_CASE_REGEXP = /-+([a-z0-9])/g;\nexport function dashCaseToCamelCase(input: string): string {\n  return input.replace(DASH_CASE_REGEXP, (...m: any[]) => m[1].toUpperCase());\n}\n\nexport function camelCaseToDashCase(input: string): string {\n  return input.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n\nexport function allowPreviousPlayerStylesMerge(duration: number, delay: number) {\n  return duration === 0 || delay === 0;\n}\n\nexport function balancePreviousStylesIntoKeyframes(\n  element: any,\n  keyframes: Array<ɵStyleDataMap>,\n  previousStyles: ɵStyleDataMap,\n) {\n  if (previousStyles.size && keyframes.length) {\n    let startingKeyframe = keyframes[0];\n    let missingStyleProps: string[] = [];\n    previousStyles.forEach((val, prop) => {\n      if (!startingKeyframe.has(prop)) {\n        missingStyleProps.push(prop);\n      }\n      startingKeyframe.set(prop, val);\n    });\n\n    if (missingStyleProps.length) {\n      for (let i = 1; i < keyframes.length; i++) {\n        let kf = keyframes[i];\n        missingStyleProps.forEach((prop) => kf.set(prop, computeStyle(element, prop)));\n      }\n    }\n  }\n  return keyframes;\n}\n\nexport function visitDslNode(\n  visitor: AnimationDslVisitor,\n  node: AnimationMetadata,\n  context: any,\n): any;\nexport function visitDslNode(\n  visitor: AnimationAstVisitor,\n  node: AnimationAst<AnimationMetadataType>,\n  context: any,\n): any;\nexport function visitDslNode(visitor: any, node: any, context: any): any {\n  switch (node.type) {\n    case AnimationMetadataType.Trigger:\n      return visitor.visitTrigger(node, context);\n    case AnimationMetadataType.State:\n      return visitor.visitState(node, context);\n    case AnimationMetadataType.Transition:\n      return visitor.visitTransition(node, context);\n    case AnimationMetadataType.Sequence:\n      return visitor.visitSequence(node, context);\n    case AnimationMetadataType.Group:\n      return visitor.visitGroup(node, context);\n    case AnimationMetadataType.Animate:\n      return visitor.visitAnimate(node, context);\n    case AnimationMetadataType.Keyframes:\n      return visitor.visitKeyframes(node, context);\n    case AnimationMetadataType.Style:\n      return visitor.visitStyle(node, context);\n    case AnimationMetadataType.Reference:\n      return visitor.visitReference(node, context);\n    case AnimationMetadataType.AnimateChild:\n      return visitor.visitAnimateChild(node, context);\n    case AnimationMetadataType.AnimateRef:\n      return visitor.visitAnimateRef(node, context);\n    case AnimationMetadataType.Query:\n      return visitor.visitQuery(node, context);\n    case AnimationMetadataType.Stagger:\n      return visitor.visitStagger(node, context);\n    default:\n      throw invalidNodeType(node.type);\n  }\n}\n\nexport function computeStyle(element: any, prop: string): string {\n  return (<any>window.getComputedStyle(element))[prop];\n}\n"],"names":["RuntimeError","ngDevMode","negativeDelayValue","invalidStyleParams","varName","invalidParamValue","invalidNodeType","nodeType","userProvidedProperty","value","invalidTrigger","invalidDefinition","invalidState","metadataName","missingSubs","join","invalidStyleValue","invalidParallelAnimation","prop","firstStart","firstEnd","secondStart","secondEnd","invalidKeyframes","invalidOffset","keyframeOffsetsOutOfOrder","keyframesMissingOffsets","invalidQuery","selector","players","normalizeKeyframes","normalizer","keyframes","preStyles","Map","postStyles","previousOffset","offset","kf","get","normalizedKeyframe","isSameOffset","previousKeyframe","forEach","val","normalizedValue","normalizedProp","normalizePropertyName","errors","PRE_STYLE","AUTO_STYLE","normalizeStyleValue","set","push","length","animationFailed","normalizedKeyframes","listenOnPlayer","player","eventName","event","callback","onStart","copyAnimationEvent","onDone","onDestroy","e","phaseName","totalTime","disabled","makeAnimationEvent","element","triggerName","fromState","toState","undefined","data","getOrSetDefaultValue","map","key","defaultValue","parseTimelineCommand","command","indexOf","id","substring","separatorPos","action","slice","documentElement","document","parent","parentNode","host","LEAVE_CLASSNAME","NG_TRIGGER_CLASSNAME","NG_ANIMATING_CLASSNAME","resolveTimingValue","matches","_convertTimeValueToMS","parseFloat","unit","ONE_SECOND","resolveTiming","timings","allowNegativeValues","hasOwnProperty","parseTimeExpression","easing","exp","invalidTimingValue","duration","delay","delayMatch","easingVal","containsErrors","startIndex","negativeStepValue","splice","Object","entries","normalizeStyles","styles","Array","isArray","setStyles","formerStyles","camelProp","dashCaseToCamelCase","style","eraseStyles","steps","sequence","validateStyleParams","options","params","extractStyleParams","RegExp","SUBSTITUTION_EXPR_START","SUBSTITUTION_EXPR_END","match","PARAM_REGEX","exec","lastIndex","interpolateParams","localVal","toString","str","original","input","replace","DASH_CASE_REGEXP","m","toUpperCase"],"mappings":";;;;;;;;;;;;;;EAqBE,OAAAA,IAAAA,aAAA,OAAAC,SAAA,IAAA,kEAAA,CAAA;AAOA;AAMI,SAAUC,kBAAkBA,GAAA;0BAImB,CAAA,IAAA,EAAAD,SAAA,IAAA,+DAAA,CAAA;;AAW/C,SAAAE,mBAAAC,OAAA,EAAA;AAKN,EAAA,OAAA,IAAAJ,aAAA,CAAA,IAAA,EAAAC,SAAA,IAEA,CAAA,4CAAA,EAAgBG,OAAA,CAKhB,4BAAA,CAAA,CAAA;;AAQA,SAAAC,kBAAAD,OAAA,EAAA;AAEA,EAAA,wBAAiC,CAAA,IAAA,EAAAH,SAKjC,IAAA,kDAAAG,OAAA,CAAA,CAAA,CAAA;;AAUA,SAAAE,eAAAC,CAAAA,QAAA,EAAA;AAEM,EAAA,OAAA,IAAAP,aAA2B,CAAA,IAAA,EAAAC,SAKjC,IAAA,8CAAAM,QAAA,CAAA,CAAA,CAAA;;;AAUA,EAAA,OAAM,IAAAP,aAAU,CAAA,IAAA,EAEIC,SAAA,IAAAO,CAAAA,oCAAAA,EAAAA,oBAAA,IAAAC,KAAA,CAAA,CAAA,CAAA;;AAalB,SAAAC,cAAA,GAAA;AAMF,EAAA,OAAM,IAAAV,aAAU,CAAA,IAAa,EAAAC,SAAA,IAC3B,sFAMuC,CAAA;AAKzC;AAGE,SAAuBU,oBAAA;AAIzB,EAAA,OAAA,IAAAX,aAAA,CAAA,IAAA,EAAAC,SAGE,6EAEe,CAAA;AAIjB;AAIM,SAAAW,YAAAA,CAAAC,YAAoB,EAAAC,WAAA,EAAA;EAE1B,OAAA,IAAAd,aAAA,CAAA,IAAA,EAAAC,SAGE,IAIF,UAAAY,YAAA,CAAA,8EAAA,EAEMC,WAAA,CAAAC,IAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA;;AAOA,SAAUC,iBAAiBA,CAAAP,KAAA,EAAA;SACxB,IAAAT,aAAgB,CAAA,IAAA,EAMnBC,SAAA,IAAwB,mCAAAQ,KAAA,CAAA,gBAAA,CAAA,CAAA;AAK9B;AAoBA,SAAAQ,wBAAAA,CAAAC,IAAA,EAAAC,UAAA,EAAAC,QAAA,EAAAC,WAAA,EAAAC,SAAA,EAAA;AAEM,EAAA,OAAA,IAAAtB,aAAwB,CAIxBC,IAAAA,EAAAA,SAAA,IAEG,CAAAiB,kBAAAA,EAAAA,IAAA,CAAAC,oCAAAA,EAAAA,UAAA,CAAAC,SAAAA,EAAAA,QAAA,CAAAC,yEAAAA,EAAAA,WAAA,YAAAC,SAAA,CAAA,GAAA,CAAA,CAAA;AAIT;AACE,yBAAuBC,GAAA;SAOhB,IAAAvB,aAAA,CAAgBC,IAAAA,EAAAA,SAAA,IAGnB,CAAA,wDAAA,CAAA,CAAA;;AAIN,SAAAuB,aAAA,GAAA;AAeA,EAAA,OAAA,IAAAxB,aAAA,CAAAC,IAAAA,EAAAA,SAAA,IAGE,CAAO,2DAAA,CAAA,CAAA;;AAOT,SAAAwB,yBAAA,GAAA;AAIM,EAAA,OAAA,IAAAzB,aAAA,CAAA,IAAA,EAAAC,SAAA,IAAA,CAAA,oDAAA,CAAA,CAAA;;AAWA,SAAAyB,uBAAA,GAAA;AAIA,EAAA,OAAA,IAAA1B,aAAA,CAAA,IAAA,EAAAC,SAAA,IAAA,CAAA,qEAAA,CAAA,CAAA;;;0BAWM,CAAA,IAAA,EAAqBA,SAAA,IAAA,CAAA,4CAAA,CAAA,CAAA;;AAUjC,SAAA0B,aAAAC,QAAA,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mOCrRsB,+IAOR,yDAGK,2CAGC,oBACM,0BACA,0BACJ,kDAEM,4BACX,iBACM,uBACM,6BACC,8BACP,uBACP,oEAGO,uBACD,4FAIK,2BACJ,oDAEM,6BACd,oCAEM,6HAMQ,6BACf,kCAEY,0BACC,2BACP,4DAIL,6DAKD,cACC,eACM,qBACA,qBACL,gBACL,WACD,iFAOU,oBACJ,gBACW,2BACZ,eACR,0BAEK,qDAGU,+CAGJ,kGAME,oBACE,sBACd,0BAEM,2DAIQ,sBACL,iBACI,qBACE,uBACR,eACC,gBACF,qFAMA,iCAED,aACA,+BAEC,cACK,mBACN,gCAEH,2BAES,mBACJ,eACI,mBACF,iBACN,kEAKM,iDAGM,uBACL,kBACI,sBACE,wBACR,iCAED,oDAGN,wDAKc,uBACI,2BACE,6BACL,wBACA,wBACI,4BACE,8BACR,4GAKM,4BACE,8BACL,yBACA,yBACI,6BACE,+BACR,+FAII,2BACR,kKAQF,wCAEF,8BAEU,yBAClB,wCAGM,+BAEC,uCAGH,aAET;;;;;;IC3LE,KAGE,CAAA;AAcJ,MAAA,OAAAC,OAAmB,CAAA,CAAA,CAAA;AAEjB,IAAA;qCAEyB,CAAAA,OAAA,CAAA;;;SAGvBC,oBAAQA,CAAAC,UAAe,EAAAC,SAAA,EAAAC,SAAA,GAAA,IAAAC,GAAA,EAAA,EAAAC,UAAA,GAAA,IAAAD,GAAA,EAAA,EAAA;;2BAEb,GAAA,EAAA;MACNE,cAAA,GAAA,CAAA,CAAA;AACE,EAAA,IAAA,gBAAA,GAAA,IAAA;;AAGF,IAAA,MAAAC,MAAA,GAAAC,EAAA,CAAAC,GAAA,CAAA,QAAA,CAAA;+BAIA,IAAAH,cACE;AASN,IAAA,MAAAI,kBAAA,GAAAC,YAAA,IAAAC,gBAAA,QAAAR,GAAA,EAAA;AACFI,IAAAA,EAAA,CAAAK,OAAA,CAAA,CAAAC,GAAA,EAAA1B,IAAE,KAAA;wBACe,GAAAA,IAAA;MACf,IAAA2B,eAAyB,GAAAD,GAAA;UAC3B1B,IAAA,KAAA,QAAA,EAAA;AACgB4B,QAAAA,cAAA,GAAAf,UAAqB,CAAAgB,qBAAA,CAAAD,cAAA,EAAAE,MAAA,CAAA;AACvB,QAAA,QAAAH,eAAS;AACvB,UAAA,KAAAI,UAAA;AACeJ,YAAAA,eAAE,GAAAZ,SAAA,CAAAM,GAAA,CAAArB,IAAA,CAAA;AACjB,YAAA;AACF,UAAA,KAAAgC,UAAA;2BAE0B,GAAAf,UAAA,CAAAI,GAAA,CAAArB,IAAA,CAAA;AAC5B,YAAA;AAEM,UAAA;YAMI2B,eAAW,GAAAd,UAAA,CAAAoB,mBAAA,CAAAjC,IAAA,EAAA4B,cAAA,EAAAD,eAAA,EAAAG,MAAA,CAAA;AACjB,YAAA;;;AAIE,MAAA,kBAAA,CAAAI,GAAA,CAAAN;;;yBAIA,CAAAO,IAAA,CAAAb,kBAAM,CAAA;;AAoBV,IAAA,gBAAA,GAAAA,kBAAA;AACA,IAAA,cAAA,GAAAH,MAAA;;AAEAW,EAAAA,IAAAA,MAAA,CAAAM,MAAA,EAAA;IACA,MAAAC,eAAY,CAAAP,MAAA,CAAA;;SAGdQ,mBAAA;;AAUAC,SAAAA,cAAAA,CAAAC,MAAA,EAAAC,SAAA,EAAAC,KAAA,EAAAC,QAAA,EAAA;AAEA,EAAA,QAAAF,SAAA;IACM,KAAK,OAAA;MACTD,MAAU,CAAAI,OAAA,CAAA,MAAED,QAAA,CAAAD,KAAA,IAAAG,kBAAA,CAAAH,KAAA,EAAA,OAAA,EAAAF,MAAA,CAAA,CAAA,CAAA;;IAGZ,KAAA,MAAA;MACFA,MAAA,CAAAM,MAAA,CAAA,MAAAH,QAAA,CAAAD,KAAA,IAAAG,kBAAA,CAAAH,KAAA,EAAA,MAAA,EAAAF,MAAA,CAAA,CAAA,CAAA;AAGQ,MAAA;AASF,IAAA,KAAA,SAA0B;MAC9BA,MAAA,CAAAO,SAAY,CAAA,MAAAJ,QAAA,CAAAD,KAAA,IAAAG,kBAAA,CAAAH,KAAA,EAAA,SAAA,EAAAF,MAAA,CAAA,CAAA,CAAA;AACZ,MAAA;;;AAGAK,SAAAA,kBAAaA,CAAAG,CAAA,EAAAC,SAAA,EAAAT,MAAA,EAAA;iBACf,GAAAA,MAAA,CAAAU,SAAA;QAESC,QAAA,GAAAX,MAAA,CAAAW,QAAA,GAAA,IAAA,GAAA,KAAA;AACkD,EAAA,MAAA,KAAA,GAAAC,kBAAA,CAAAJ,CAAA,CAAAK,OAAA,EAAAL,CAAA,CAAAM,WAAA,EAAAN,CAAA,CAAAO,SAAA,EAAAP,CAAA,CAAAQ,OAAA,EAAAP,SAAA,IAAAD,CAAA,CAAAC,SAAA,EAAAC,SAAA,IAAAO,SAAA,GAAAT,CAAA,CAAAE,SAAA,GAAAA,SAAA,EAAAC,QAAA,CAAA;AACzB,EAAA,MAAA,IAAA,GAAAH,CAAA,CAAA,OAAA,CAAA;AAChC,EAAA,IAAAU,IAAA,IAAA,IAAA,EAAA;AACFhB,IAAAA,KAAA,YAAAgB,IAAA;AAGA;SAKEhB,KAAA;;SAGIU,kBAAAA,CAAAC,OACF,EAAAC,WACA,EAAAC,kBACQ,EACNN,SAAA,gBACF,MAAAE,QACF,EAAA;EAKI,OAAA;IAAAE,OAA4C;IAAAC,WAAA;IAAAC,SAAA;IAAAC,OAAA;IAAAP,SAAA;IAAAC,SAAA;AAAAC,IAAAA,QAAA,EAAAA,CAAAA,CAAAA;AAAA,GAAA;;AAElDQ,SAAAA,oBAAAA,CAAAC,GAAA,EAAAC,GAAA,EAAAC,YAAA,EAAA;AAEA,EAAA,IAAAvE,KAAA,GAAAqE,GAAA,CAAAvC,GAAA,CAAAwC,GAAA,CAAA;AACE,EAAA,IAAA,CAAAtE,KAAW,EAAA;;AAGX;AAUA,EAAA,OAAAA,KAAA;AACF;AAGM,SAAOwE,oBAAAA,CAAAC,OAAA,EAAA;oBACF,GAAMA,OAAK,CAAAC,OAAA,CAAA,GAAA,CAAA;QACpBC,EAAA,GAAAF,OAAA,CAAAG,SAAA,IAAAC,YAAA,CAAA;AACAC,EAAAA,MAAAA,MAAM,UAAc,CAAAC,kBAAe,GAAA,CAAA,CAAA;;;AAIrC,MAAMC,eAAA,kBAAAC,CAAAA,MAAAA,OAAAA,QAAA,KAAAA,WAAAA,GAAAA,IAAAA,GAAAA,QAAA,CAAAD,eAAA,GAAA;AAEI,iCAAuB,EAAA;QAC7BE,MAAA,GAAApB,OAAgB,CAAAqB,UAAK,IAAyBrB,OAAA,CAAAsB,IAAA,IAAA,IAAA;EAC9C,IAAAF,MAAA,KAAAF,eAAwB,EAAA;AAC1B,IAAA,OAAE,IAAA;AACF;AACF,EAAA,OAAAE,MAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnMA,MAAAG,eAAA,GAAA;AACO,MAGPC,uBAME;AAKF,yBAEI;MAYFC,sBAA6B,GAAA;8BAEY;AAC3C,SAAAC,kBAAAA,CAAAxF,KAAA,EAAA;AAEA,EAAA,IAAM,OAAAA,KAAA,IAAA,QAAA,EAEN;AAKE,EAAA,MAAAyF,sBAAoB,mBAAA,CAAA;MAChB,CAAAA,OAAK,IAAAA,OAAA,CAAA5C,MAAY,GAAA,GACjB,OAAA,CAAA;EACJ,OAAA6C,qBAAW,CAAAC,UAAkB,CAAAF,OAAA,CAAA,CAAA,IAAAA,OAAA,CAAA,CAAA,CAAA,CAAA;AAE3B;oCACc,EAAAG,IAAA,EAAA;UAAAA,IAAA;SAEd,GAAA;MAEA,OAAA5F,QAAgC6F,UAAA;AAAA,IAAA;AAGhC,MAAA,OAAA7F,KAAA;AACE;AAGF;SACI8F,aAAAA,CAAAC,OAAA,EAAAxD,MAAA,EAAAyD,mBAAA,EAAA;gBACF,CAAAC,cAAA,CAAA,UAAA,CAAA,aAEJC,mBAAA,CAAAH,OAAA,EAAAxD,MAAA,EAAAyD,mBAAA,CAAA;;;;cAKM;WAKJ,GAAA,CAAA;AACAG,EAAAA,IAAAA,MAAa,GAAE,EAAA;AACb,EAAA,IAAA,OAAAC,GAAA,KAA8B,QAAA,EAAA;;;AAKhC7D,MAAAA,MAAA,CAAAK,IAAA,CAAAyD,kBAIJ,CAAAD,GAAA,CAAA,CAAA;MAKE,OAAe;QAAAE,QAAA,EAAA,CAAA;QAAAC,KAAA,EAAA,CAAA;QAAAJ,MAAA,EAAA;AAAA,OAAA;AACb;AACFG,IAAAA,QAAA,GAAAZ,qBAAA,CAAAC,UAAA,CAAAF,OAAA,MAAAA,OAAA,CAAA,CAAA,CAAA,CAAA;IACA,MAAAe,UAA4B,GAAAf,OAAA,CAAA,CAAA,CAAA;IAC1B,IAAAe,kBAAwC,EAAA;AAC1CD,MAAAA,KAAA,GAAAb,qBAAA,CAAAC,UAAA,CAAAa,UAAA,GAAAf,OAAA,CAAA,CAAA,CAAA,CAAA;;UAEFgB,SAAA,GAAAhB,OAAA,CAAA,CAAA,CAAA;AAEM,IAAA,IAAAgB,SAAA,EAAA;AAENN,MAAAA,MAAA,GAAAM,SAAA;AAGE;;AAGIH,IAAAA,QAAA,GAAAF,GAAA;;AAGJ,EAAA,IAAA,CAAAJ,mBAAE,EAAA;AACJU,IAAAA,IAAAA,cAAA,GAAA,KAAA;AAEA,IAAA,IAAAC,UAAA,GAAApE,MAAA,CAAAM,MAAA;;MACQN,MAAA,CAAAK,IAAA,CAAAgE,iBAAA,EAAA,CAAA;MACJF;AACA;AAEJ,IAAA,IAAAH,KAAA,GAAA,CAAA,EAAA;MAEMhE,MAAA,CAAAK,IAAA,CAAAnD,kBAAiC,EAAA,CAAA;AAGjCiH,MAAAA,cAAa,GAAO,IAAA;AACtB;QAAuBA,cAAA,EAAA;AACvBnE,MAAAA,MAAA,CAAAsE,MAAA,CAAeF,UAAM,EAAAN,CAAAA,EAAAA,kBAAA,CAAAD,GAAA,CAAA,CAAA;AACvB;;;IAEFE,QAAA;IAAAC,KAAA;AAAAJ,IAAAA;AAAA,GAAA;;AAOE9E,SAAAA,kBAAAA,CAAAE,SAAA,EAAA;MACA,CAAAA,SAAA,CAAAsB,MAAA,EAAgB;AAChB,IAAA,OAAA,EAAA;;;oBAII;AACF;AAEJ,EAAA,OAAAtB,SAAA,CAAA8C,GAAA,CAAAxC,EAAA,IAAA,IAEAJ,GAAA,CAAAqF,MACK,CAAAC,OAAA,CAAAlF,EAAA,CAAA,CAAA,CAAA;;AAKQmF,SAAAA,eAAAA,CAAAC,MAAA,EAAA;AACT,EAAA,OAAAC,KAAA,CAAAC,OAAA,CAAAF,MAAA,CAAA,GAAA,IAAAxF,GAAA,CAAA,GAAAwF,MAAA,CAAA,GAAA,IAAAxF,GAAA,CAAAwF,MAAA,CAAA;;kBAEiCG,CAAAtD,OAAA,EAAAmD,MAAA,EAAAI,YAAA,EAAA;;AAEjC,IAAA,MAAAC,SAAW,GAACC,mBAAa,CAAA9G,IAAA,CAAA;;MAG7B4G,YAAA,CAAA1E,GAAA,CAAAlC,IAAA,EAAAqD,OAAA,CAAA0D,KAAA,CAAAF,SAAA,CAAA,CAAA;AAEA;AAKExD,IAAAA,OAAA,CAAA0D,KAAA,CAAAF,SAAA,IAAAnF,GAAA;GAEE,CAAA;;AAEAsF,SAAAA,WAAYA,CAAA3D,OAAA,EAAAmD,MAAA,EAAU;8BACR;sBACJM,mBAAK,CAAA9G,IAAA,CAAA;;;;;AAOnB,EAAA,IAAAyG,KAAA,CAAAC,OAAA,CAAAO,KAAA,CAAA,EAAA;IAEM,IAAAA,KAAA,CAAA7E,MAAA,IAAmB,CAAA,EACnB,OAAA6E,KAA6B,CAAA,CAAA,CAAA;IACjC,OAAOC,QAAa,CAAAD,KAAA,CAAA;AACtB;AAEM,EAAA,OAAAA,KAAA;AAEN;AAIA,SAAAE,mBAAAA,CAAA5H,KAAA,EAAA6H,OAAA,EAAAtF,MAAA,EAAA;QAEAuF,gBAAkD,CAAAA,MAAA,IAAA,EAAA;eAAA,GAAAC,kBAAA,CAAA/H,KAAA,CAAA;MAKhDyF,OAAI,CAAA5C,MAAA,EAAA;IACF4C,OAAA,CAAAvD,OAAA,CAAAvC,OAAA,IAAA;AACI,MAAA,IAAgC,CAAAmI,MAAA,CAAA7B,cAAA,CAAAtG,OAAA,CAAA,EAAA;;AAGhC;KAMF,CAAA;AACE;;AAEF,MAAA,WAAA,kBAAA,IAAAqI,MAAA,CAAAC,CAAAA,EAAAA,uBAAA,gBAAAC,qBAAA,CAAA,CAAA,EAAA,GAAA,CAAA;AACFH,SAAAA,kBAAAA,CAAA/H,KAAA,EAAA;AACF,EAAA,IAAA,MAAA,GAAA,EAAA;aACAA,KAAA,KAAA,QAAA,EAAA;AACF,IAAA,IAAAmI,KAAA;AAYA,IAAA,OAAAA,KAAA,GAAAC,WAAA,CAAAC,IAAA,CAAArI,KAAA,CAAA,EAAA;MACE8H,MAAA,CAAAlF,IAAA,CAAAuF,KAAA,CAAA,CAAA,CAAA,CAAA;;eAMW,CAAAG,SAAA,GAAA,CAAA;;eAEA;;AAEPC,SAAAA,iBAAOA,CAAAvI,KAAkB,EAAA8H,MAAO,EAAAvF,MAAA,EAAA;gBAC7B,GAAA,CAAA,EAAAvC,KAAA,CAAA,CAAA;;gBAEA,GAAA8H,MAAA,CAAAnI,OAAA,CAAA;QAEA6I,QAAA,IAAA,IAAA,EAAA;;cAGI,GAAA,EAAA;;mBAMA,CAAAC,QAAkB,EAAA;;AAG3BC,EAAAA,OAAAA,GAAA,IAAAC,QAAA,GAAA3I,KAAA,GAAA0I,GAAA;;AAEF,MAAA,gBAAA,GAAA,eAAA;AACFnB,SAAAA,mBAAAA,CAAAqB,KAAA,EAAA;SAEAA,KAAgB,CAAAC,OAAA,CAAAC,gBAAa,MAAAC,CAAA,KAAAA,CAAA,CAAA,CAAA,CAAA,CAAAC,WAAA,EAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}